<template>
  <div
    v-if="isLoading && !isError"
    class="h__dim"
  >
    <div class="h__dim--loading"></div>
  </div>
  <div
    v-if="isError"
    class="h__dim"
  >
    <div class="h__dim--error">ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</div>
  </div>
  <div class="h__home">
    <div class="h__home__header">
      <figure class="h__home__header--logo">
        <img
          src="@/assets/images/logo.png"
          alt="ë¡œê³ "
        />
      </figure>
      <h1 class="h__home__header--title">FE Schedule</h1>
      <span class="h__home__header--date">{{ formatDate(startDate, 'kor') }} ~ {{ formatDate(endDate, 'kor') }}</span>
      <div class="h__home__header--status">
        <span>âœ… ì—…ë°ì´íŠ¸ í˜„í™©</span>
        <div>ì£¼ê°„ì¼ì • : {{ checkStatus(fetches.getWeekSchedule) }}</div>
        <div>ê³µìœ ì¼ì • : {{ checkStatus(fetches.getDetailSchedule) }}</div>
        <div>íˆ¬ì…ì‹œê°„ : {{ checkStatus(fetches.weekScheduleList) }}</div>
      </div>
      <dl class="h__home__header--notice">
        <dt>ğŸ“Œ ì „ë‹¬ì‚¬í•­</dt>
        <dd>ê³„ì‚°ì´ ì¼ì¹˜í•˜ì§€ ì•Šì€ ê²½ìš° ë§ì”€í•´ì£¼ì„¸ìš”.</dd>
        <dd>ì£¼ë§/ìƒˆë²½ ì¼ì • ê³„ì‚°ì€ ê°œë°œì¤‘ì…ë‹ˆë‹¤.</dd>
        <dd>ë²„ê·¸ ë° í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤.</dd>
      </dl>
    </div>

    <div class="h__home__content">
      <h-table
        :members="members.slice(0, 5)"
        :schedules="schedules.slice(0, 5)"
      ></h-table>
      <h-table
        :members="members.slice(5, 10)"
        :schedules="schedules.slice(5, 10)"
      ></h-table>
    </div>

    <div class="h__home__footer">2023. JunTae Hahm</div>
  </div>
</template>

<script setup lang="ts">
  import HTable from '@/components/elements/h-table.vue';
  import homeComposable from '@/composables/views/home';
  import { formatDate } from '@/utils/date';

  const { fetches, isLoading, isError, checkStatus, startDate, endDate, members, schedules } = homeComposable();
</script>

<style scoped lang="scss">
  @import '@/styles/views/home/index.scss';
</style>
